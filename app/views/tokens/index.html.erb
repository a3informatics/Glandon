<%= javascript_include_tag 'standard_datatable' %>
<h3>Index: Edit Locks</h3>
<div class="row">
	<div class="col-md-12">
		<h4>Table</h4>
		<table id="main" class="table table-striped table-bordered table-condensed">
		  	<thead>
				<tr>
			  		<th class="col-sm-3">Locked At</th>
			  		<th class="col-sm-1">Remaining</th>
			  		<th class="col-sm-3">URI</th>
			    	<th class="col-sm-2">Info</th>
			    	<th class="col-sm-1">User</th>
			    	<th class="col-sm-1">Refresh Count</th>
			    	<th class="col-sm-1"></th>
			  	</tr>
			</thead>
			<tbody>
					<% @tokens.each do |token| %>
						<tr>
							<td><%= token.locked_at %></td>
							<td><%= Time.at(@timeout - (Time.now - token.locked_at).to_i.abs).utc.strftime "%M:%S" %></td>
							<td><%= token.item_uri %></td>
							<td><%= token.item_info %></td>
							<td><%= token.user_id %></td>
							<td><%= token.refresh_count %></td>
							<td><%= link_to "Release", release_token_path(token.id), method: :post, data: { confirm: "Are you sure?" }, :class => "btn btn-danger btn-xs" %></td>
						</tr>
					<% end %>
			</tbody>
		</table>
	</div>
</div>