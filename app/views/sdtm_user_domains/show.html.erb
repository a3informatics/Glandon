<%= javascript_include_tag 'standard_datatable' %>
<% third_level_managed_item_breadcrumb(@sdtm_user_domain, "SDTM Domains", sdtm_user_domains_path, @close_path, "Show:") %>
<%= render partial: "shared/stdInstanceTitle", :locals => {:title => "Show:", :item => @sdtm_user_domain} %>
<div class="col-md-12">
	<h4>Details</h4>
	<table class="table table-striped table-bordered table-condensed">
		<thead>
	  		<tr>
	    		<th>Identifer</th>
	    		<th>Label</th>
	    		<th>Owner</th>
	    		<th>Internal Version</th>
	    		<th>Version</th>
	  		</tr>
		</thead>
		<tbody>
	  		<tr>
	    		<td><%= @sdtm_user_domain.identifier %></td>
			    <td><%= @sdtm_user_domain.label %></td>
			    <td><%= @sdtm_user_domain.owner %></td>
			    <td><%= @sdtm_user_domain.semantic_version %></td>
			    <td><%= @sdtm_user_domain.versionLabel %></td>
	  		</tr>
		</tbody>
	</table>
	<table class="table table-striped table-bordered table-condensed">
		<thead>
	  		<tr>
	    		<th>Notes</th>
	  		</tr>
		</thead>
		<tbody>
	  		<tr>
	    		<td><%= raw MarkdownEngine::render(@sdtm_user_domain.notes) %></td>
	  		</tr>
		</tbody>
	</table>
	<h4>Used Variables</h4>
	<table id="main" class="table table-striped table-bordered table-condensed">
	  	<thead>
			<tr>
		  		<th>Ordinal</th>
		  		<th>Name</th>
		  		<th>Label</th>
		  		<th>Datatype</th>
		  		<th>CT</th>
		  		<th>Format</th>
		  		<th>Role</th>
		  		<th>Sub Role</th>
		  		<th>IG Notes</th>
		  		<th>Notes</th>
		  		<th>Core</th>
		  	</tr>
		</thead>
		<tbody>
			<% @sdtm_user_domain.children.each_with_index do |item, index| %>
		  	<% if item.used %>
				  <tr>
			    	<% ig_variable = @ig_variables[index] %></td>
			    	<td><%= item.ordinal %></td>
			    	<td><%= item.name %></td>
			  		<td><%= item.label %></td>
			  		<td><%= item.datatype_label %></td>
			  		<td>
			  			<% if !item.ct.empty? %>
			  				<%= link_to item.ct, find_submission_cdisc_terms_path(:notation => item.ct), :class => "btn btn-primary btn-xs" %><br/>
			  			<% else %>
			  				&nbsp;
			  			<% end %>
			  		</td>
			  		<td><%= item.format %></td>
			  		<td><%= item.classification_label %></td>
			  		<td><%= item.sub_classification_label %></td>
			  		<td><%= ig_variable.notes %></td>
			  		<td><%= raw MarkdownEngine::render(item.notes) %></td>
			  		<td><%= item.compliance_label %></td>		  		
			  	</tr>
				<% end %>
			<% end %>
		</tbody>
	</table>
	<h4>Unused Variables</h4>
	<table id="secondary" class="table table-striped table-bordered table-condensed">
	  	<thead>
			<tr>
		  		<th>Ordinal</th>
		  		<th>Name</th>
		  		<th>Label</th>
		  		<th>Datatype</th>
		  		<th>CT</th>
		  		<th>Format</th>
		  		<th>Role</th>
		  		<th>Sub Role</th>
		  		<th>IG Notes</th>
		  		<th>Notes</th>
		  		<th>Core</th>
		  	</tr>
		</thead>
		<tbody>
			<% @sdtm_user_domain.children.each_with_index do |item, index| %>
		  	<% if !item.used %>
			    <tr>
			    	<% ig_variable = @ig_variables[index] %></td>
			    	<td><%= item.ordinal %></td>
			    	<td><%= item.name %></td>
			  		<td><%= item.label %></td>
			  		<td><%= item.datatype_label %></td>
			  		<td>
			  			<% if !item.ct.empty? %>
			  				<%= link_to item.ct, find_submission_cdisc_terms_path(:notation => item.ct), :class => "btn btn-primary btn-xs" %><br/>
			  			<% else %>
			  				&nbsp;
			  			<% end %>
			  		</td>
			  		<td><%= item.format %></td>
			  		<td><%= item.classification_label %></td>
			  		<td><%= item.sub_classification_label %></td>
			  		<td><%= ig_variable.notes %></td>
			  		<td><%= raw MarkdownEngine::render(item.notes) %></td>
			  		<td><%= item.compliance_label %></td>		  		
			  	</tr>
				<% end %>
			<% end %>
		</tbody>
	</table>
	<h4>Biomedical Concepts</h4>
	<table id="tertiary" class="table table-striped table-bordered table-condensed">
	  	<thead>
			<tr>
		  		<th>Identifer</th>
			    <th>Label</th>
			    <th>Owner</th>
			    <th>Version</th>
			    <th>Version Label</th>
		  	</tr>
		</thead>
		<tbody>
			<% @bcs.each do |bc| %>
				<tr>
		    		<td><%= bc.identifier %></td>
	    			<td><%= bc.label %></td>
	    			<td><%= bc.owner %></td>
	    			<td><%= bc.semantic_version %></td>
	    			<td><%= bc.versionLabel %></td>
		  		</tr>
			<% end %>
		</tbody>
	</table>
	<%= link_to "Report", full_report_sdtm_user_domain_path(:format => :pdf, :id => @sdtm_user_domain.id, :sdtm_user_domain => { :namespace => @sdtm_user_domain.namespace}), 
		:class => "btn btn-primary", :target => "_blank" %>
	<%= link_to "BC+", add_sdtm_user_domains_path(:id => @sdtm_user_domain.id, :sdtm_user_domain => { :namespace => @sdtm_user_domain.namespace}), 
		:class => "btn btn-primary" %>
	<%= link_to "BC-", remove_sdtm_user_domains_path(:id => @sdtm_user_domain.id, :sdtm_user_domain => { :namespace => @sdtm_user_domain.namespace}), 
		:class => "btn btn-danger" %>
	<%= link_to "Export JSON", export_json_sdtm_user_domain_path(:id => @sdtm_user_domain.id, :sdtm_user_domain => { :namespace => @sdtm_user_domain.namespace}), 
		:class => "btn btn-info" %>
	<%= link_to "Export Turtle", export_ttl_sdtm_user_domain_path(:id => @sdtm_user_domain.id, :sdtm_user_domain => { :namespace => @sdtm_user_domain.namespace}), 
		:class => "btn btn-info" %>
	<%= link_to "Export XPT", export_xpt_sdtm_user_domain_path(:id => @sdtm_user_domain.id, :sdtm_user_domain => { :namespace => @sdtm_user_domain.namespace}), 
		:class => "btn btn-info" %>
</div>
