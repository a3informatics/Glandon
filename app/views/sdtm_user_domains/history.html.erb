<%= javascript_include_tag 'standard_datatable' %>
<% index_label = "SDTM Domains" %>
<% index_path = sdtm_user_domains_path %>
<h3>History: <%= @identifier %></h3>
<div class="row">
	<div class="col-md-12">
		<h4>Item History</h4>
		<table id="main" class="table table-striped table-bordered table-condensed">
			<%= render partial: "shared/stdInstanceHeader" %>
			<tbody>
				<% current_item = get_current_item(@history) %>
				<% @history.each do |item| %>
					<%= render partial: "shared/stdInstanceRow", :locals => {:item => item,
						:current_item => current_item, 
		  				:showPath => sdtm_user_domain_path(:id => item.id, :sdtm_user_domain => { :namespace => item.namespace }), 
		  				:searchPath => "", 
		  				:viewPath => "",
		  				:editPath => edit_sdtm_user_domain_path(:id => item.id, :sdtm_user_domain => { :namespace => item.namespace }),
		  				:deletePath => sdtm_user_domain_path(:id => item.id, :sdtm_user_domain => { :namespace => item.namespace }),
		  				:index_label => index_label,
		  				:index_path => index_path,
		  				:mi_class => SdtmUserDomain } %>
				<% end %>				
			</tbody>
		</table>
	</div>
</div>
<div class="row">
	<div class="col-md-12">
		<h4>Comment History</h4>
		<table id="secondary" class="table table-striped table-bordered table-condensed">
  		<%= render partial: "shared/comment_history_header" %>
  		<tbody>
    		<% @history.each do |item| %>
    			<%= render partial: "shared/comment_history_row", 
						:locals => { 
							:item => item,
							:index_label => index_label,
		  				:index_path => index_path,
		  				:mi_class => SdtmUserDomain 
						} %>  
    		<% end %>
  		</tbody>
		</table>
	</div>
</div>
<%= link_to "Changes", changes_iso_managed_index_path({iso_managed: {rdf_type: @history.first.rdf_type, child_property: "name", identifier: @identifier, scope_id: @scope_id}}), :class => "btn " %>

