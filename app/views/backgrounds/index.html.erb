<%= javascript_tag 'setPageTitle("Background jobs")' %>
<%= javascript_include_tag 'background_index'%>
<%= javascript_include_tag 'standard_datatable' %>
<% top_level_breadcrumb ("Background") %>
<h3>Index: Background Jobs</h3>
<div class="col-md-12">
	<table id="main" class="table table-striped table-bordered table-condensed">
		<thead>
	  	<tr>
	    	<th class="col-sm-4">Description</th>
	    	<th class="col-sm-2">Status</th>
	    	<th class="col-sm-2">Started At</th>
	    	<th class="fit">% Complete</th>
	    	<th class="fit">Complete</th>
	    	<th class="col-sm-2">Completed At</th>
        <th class="fit"></th>
	  	</tr>
		</thead>
		<tbody>
			<% @jobs.each do |job| %>
	    	<tr>
					<td><%= job.description %></td>
	    		<td><%= job.status %></td>
	    		<td><%= Timestamp.new(job.started).to_datetime %></td>
	    		<td><%= job.percentage %></td>
	    		<%= true_false_glyphicon(job.complete) %>
	    		<td><%= Timestamp.new(job.completed).to_datetime %></td>
          <td>
            <%= render partial: "shared/buttons/delete", locals: {link_path: background_path(job), small: true,
              id: "delete_button_#{job.id}", label: "Delete"} %>
          </td>
	    	</tr>
			<% end %>
	  </tbody>
	</table>
  <%= render partial: "shared/buttons/delete", locals: {link_path: destroy_multiple_backgrounds_path({backgrounds: {items: "completed"}}),
    small: false, id: "clear_button", label: "Delete Completed"} %>
  <%= render partial: "shared/buttons/delete", locals: {link_path: destroy_multiple_backgrounds_path({backgrounds: {items: "all"}}),
    small: false, id: "clear_button", label: "Delete All"} %>

</div>
