<%= javascript_tag "setPageTitle('Edit: #{@form.has_identifier.identifier} (#{@form.semantic_version})')"%>

<%= stylesheet_link_tag 'shared/forms/form_editor' %>
<%= javascript_pack_tag 'forms/edit' %>

<% third_level_breadcrumb(:forms, @form, @close_path) %>

<%= javascript_tag "let editorFormId = '#{@form.id}',
                        editorDataUrl = '#{edit_form_path(@form)}',
                        editorRefDataUrl = '#{referenced_items_form_path(@form)}'
                        editorUpdateUrl = '#{edit_form_path(@form)}',
                        tokenTimerId = '#{@edit.token.id}',
                        tokenTimerWarning = '#{current_user.edit_lock_warning}';"%>

<div class="row">
  <%= render layout: "shared/headers/header_managed_item", :locals => {:item => @form, :badge => "icon-forms"} do %>

    <div class="actions-wrap">
			<%= render partial: "shared/buttons/ico_btn_secondary", :locals => {link_path: "#", id: "timeout",
				icon: "icon-lock", btn_text: "", dt_toggle: "", disabled: false } %>
      <%= render partial: "shared/buttons/ico_btn_secondary", :locals => {link_path: @close_path, id: "close",
        icon: "icon-long-arrow", btn_text: "Return", dt_toggle: "", disabled: false } %>
    </div>

  <% end %>
</div>

<div class="row">

  <div class="col-md-12 card">
  	<div class="card-header">
  		Form Editor
  	</div>

		<div class="card-content">

			<div id="form-editor" style="min-height: 400px">

			  <%= render partial: "shared/d3/tree_graph" %>

			</div>

		</div>
  </div>

</div>

<%= render partial: "shared/forms/edit/node_editor_modal" %>
