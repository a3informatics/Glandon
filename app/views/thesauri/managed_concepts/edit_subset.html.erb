<%= javascript_tag 'setPageTitle("Edit Subset: '+@subset_mc.notation+' ('+@subset_mc.has_identifier.identifier+')")' %>
<%= javascript_include_tag 'thesauri/managed_concepts/edit_subset', 'shared/timer', 'unload',
    'shared/thesauri/managed_concepts/subset_source_children_panel', 'shared/thesauri/managed_concepts/subset_edit_children_panel' %>
<%= stylesheet_link_tag 'custom/edit_subset' %>
<%= stylesheet_link_tag 'shared/datatables_loading' %>
<%= javascript_tag "var source_children_url = '#{children_thesauri_managed_concept_path({id: @source_mc})}';" %>
<%= javascript_tag "var subset_children_url = '#{list_children_thesauri_subset_path(@subset)}';" %>
<%= javascript_tag "var subset_url = '#{add_thesauri_subset_path(@subset).chomp "/add"}';" %>
<% third_level_breadcrumb(:thesauri, @subset_mc, history_thesauri_index_path({thesauri: {identifier: @subset_mc.scoped_identifier, scope_id: @subset_mc.scope.id}})) %>
<div class="row">
  <%= render layout: "shared/iso_managed/managed_header_card_cl", :locals => {:item => @subset_mc, :context => @ct, :badge => "CL"} do %>
    <div class="actions-wrap">
      <div class="ttip">
        <span class="ttip-text shadow-small text-small"> Extend lock </span>
      <%= render partial: "shared/buttons/ico_btn_secondary", :locals => {link_path: "#", id: "timeout",
        icon: "icon-lock", btn_text: "", dt_toggle: "", disabled: false } %> </div>
      <%= render partial: "shared/buttons/ico_btn_secondary", :locals => {link_path: "#edit-properties-modal", id: "edit-properties",
        icon: "icon-edit", btn_text: "Edit properties", dt_toggle: "modal", disabled: false } %>
      <%= render partial: "shared/iso_managed/edit_item_properties", :locals => {mc: @subset_mc} %>
      <%= render partial: "shared/buttons/ico_btn_secondary", :locals => {link_path: "javascript: history.back()", id: "close",
        icon: "icon-long-arrow", btn_text: "Return", dt_toggle: "", disabled: false } %>
    </div>
  <% end %>
</div>
<div class="row">
  <div class="col-md-12 card">
    <div class="card-header">
      Edit Subset
    </div>
    <div class="card-content">
      <div class="editor-wrap">
        <%= render partial: "shared/iso_managed/edit_subset_panel", :locals => {panel_title: "Source Code List (".concat(@source_mc.has_identifier.identifier,")"),
          table_id: "source_children_table", is_editing_panel: false, info: "Click on an item to add/remove <br> it from the subset.".html_safe} %>
        <%= render partial: "shared/iso_managed/edit_subset_panel", :locals => {panel_title: "Ordered Subset (".concat(@subset_mc.has_identifier.identifier,")"),
          table_id: "subset_children_table", is_editing_panel: true, info: "You can change the order <br> of items by dragging them.".html_safe} %>
      </div>
    </div>
  </div>
</div>
<input type="hidden" id="edit_lock_token" value="<%= @token.id %>">
<input type="hidden" id="warning_timeout" value="<%= current_user.edit_lock_warning %>">
