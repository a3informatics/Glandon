<% content_for :page_title do %> <%= "Changes: #{@tc.notation} (#{@tc.has_identifier.identifier})" %> <% end %>

<%= javascript_include_tag 'thesauri/managed_concepts/changes' %>
<%= javascript_tag "var differences_url_path = '#{differences_thesauri_managed_concept_path(@tc)}';" %>
<%= javascript_tag "var changes_url_path = '#{changes_data_thesauri_managed_concept_path(@tc)}';" %>
<%= javascript_tag "var column_count = '#{@version_count}';" %>
<%= javascript_tag "var pdfLoadingDur = 30,
                        loadingMessage = 'Generating report...',
                        errTimeoutMessage = 'Error occurred while generating the report.',
                        redirectPath = '"+changes_report_thesauri_managed_concept_path(@tc, format: :pdf)+"';" %>
<% third_level_breadcrumb(:thesauri, @tc, history_thesauri_index_path({thesauri: {identifier: @tc.scoped_identifier, scope_id: @tc.scope.id}})) %>

<div class="row">
  <%= render layout: "shared/headers/header_codelist", :locals => { item: @tc, context: nil, badge: "CL" } do %>
    <div class="actions-wrap">

      <div onclick="showFullPageSpinnerWithRedirect(pdfLoadingDur, loadingMessage, errTimeoutMessage, redirectPath);">
        <%= render partial: "shared/buttons/ico_btn_secondary", :locals => { url: "#", id: "report",
            icon: "icon-file", text: "PDF Report" } %>
      </div>

      <%= render partial: "shared/buttons/return", :locals => { url: 'javascript: history.back()' } %>

    </div>
  <% end %>
</div>
<div class="row">
  <%= render partial: "shared/thesauri/differences_panel_v2", :locals => {title: "Differences", info: "Row of 'No change' indicates only child items have changed. See the changes window below.", column_count: @version_count, links: @links} %>
</div>
<div class="row">
  <%= render partial: "shared/thesauri/changes_panel_v2", :locals => {title: "Changes", info: "Changes in the items.", column_count: @version_count, links: @links} %>
</div>
