<% if Rails.env == "test" || Rails.env == "development" %>
  <%= javascript_include_tag 'rspec_helper' %>
<% end %>

<%= stylesheet_link_tag 'shared/annotations' %>
<%= javascript_include_tag 'shared/annotation/change_instructions_modal', 'shared/annotation/change_instructions_html' %>
<%= javascript_tag "var listCIsUrl = '#{change_instructions_iso_concept_path(id: item_id)}',
                        ciBaseUrl = '#{annotations_change_instructions_path}',
                        ciCanEdit = #{local_assigns.fetch(:can_edit, false)};" %>

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="tableModalLabel" aria-hidden="true" id="change-instructions-modal">
  <div class="modal-dialog modal-lg medium-screen" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title text-normal text-medium" id="tableModalLabel">
          <span class="icon-instruction text-link" style="margin-right:10px;"></span>
          Change Instructions for <%= item_name %>
        </span>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body font-light">
        <center>
            <table id="change-instructions-table">
              <thead><th></th></thead>
              <tbody></tbody>
            </table>
          <hr/>
          <% if local_assigns.fetch(:can_edit , false) %>
            <button class="btn medium green" id="add-ci-button">
              + Create new
            </button>
            <div class="text-small"><i> A blank Change Instruction will be created. It will not be attached to this item by default.</i></div>
          <% end %>
        </center>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn medium" id="close-ci-modal-button" data-dismiss="modal" aria-label="Close">Close</button>
      </div>
    </div>
  </div>
</div>
