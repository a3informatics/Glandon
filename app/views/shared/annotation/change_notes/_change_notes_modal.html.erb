<% if Rails.env == "test" || Rails.env == "development" %>
  <%= javascript_include_tag 'rspec_helper' %>
<% end %>
<%= stylesheet_link_tag 'shared/annotations', 'shared/datatables_loading' %>
<%= javascript_include_tag 'shared/annotation/change_notes_modal' %>

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="tableModalLabel" aria-hidden="true" id="change-notes-modal">
  <div class="modal-dialog modal-lg medium-screen" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title text-normal text-medium" id="tableModalLabel">
          <span class="icon-note text-link" style="margin-right:10px;"></span>
          Change notes for <%= item_name %>
        </span>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body font-light">
        <div id="change-notes-modal-error"></div>
        <div class="row table-invisible small-search">
          <div class="table-width-wrapper narrow">
            <table id="change-notes-table" class="table table-striped table-condensed">
              <thead><tr> <th class="ignore"></th> <th class="ignore">Timestamp</th> </tr></thead>
              <tbody></tbody>
            </table>
          </div>
          <center>
            <button class="btn medium green" id="add-cn-button">+ Add new</button>
          </center>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn medium" id="close-cn-modal-button" data-dismiss="modal" aria-label="Close">Close</button>
      </div>
    </div>
  </div>
</div>
<%= javascript_tag "var changeNoteItemHTML = '#{escape_javascript(render partial: 'shared/annotation/change_notes/change_notes_item', :locals =>{})}'" %>
<%= javascript_tag "var modalCN = new ChangeNotesView('#{item_notes_url}', '#{annotations_change_note_path("note_id")}', changeNoteItemHTML);" %>
