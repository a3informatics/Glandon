<%= javascript_tag 'setPageTitle("Ad-Hoc Reports")' %>
<%= javascript_include_tag 'standard_datatable' %>
<% first_level_breadcrumb (id_to_type('ad_hoc_reports')) %>
<h3>Index: Ad-Hoc Reports</h3>
<div class="row">
	<div class="col-md-12">
		<h4>Reports</h4>
		<table id="main" class="table table-striped table-bordered table-condensed">
			<thead>
		  	<tr>
		    	<th>Label</th>
		    	<th>Last Run</th>
		    	<th>Active</th>
		    	<th></th>
		    	<th></th>
		    	<th></th>
		  	</tr>
			</thead>
			<tbody>
				<% @items.each do |item| %>
		    	<tr>
						<td><%= item.label %></td>
		    		<td><%= Timestamp.new(item.last_run).to_datetime %></td>
		    		<%= true_false_glyphicon(item.active) %>
		    		<td><%= link_to "Run", run_start_ad_hoc_report_path(item), :class => "btn  btn-xs" %></td>
		    		<td><%= link_to "Results", results_ad_hoc_report_path(item), :class => "btn  btn-xs" %></td>
		    		<% if policy(AdHocReport).destroy? %>
		    			<td><%= link_to "Delete", ad_hoc_report_path(item), method: :delete, data: { confirm: "Are you sure?" }, :class => "btn btn-danger btn-xs" %></td>
		    		<% else %>
		    			<td></td>
		    		<% end %>
		    	</tr>
				<% end %>
		  </tbody>
		</table>
		<% if policy(AdHocReport).create? %>
			<%= link_to "New", new_ad_hoc_report_path, :class => "btn btn-success" %>
		<% end %>
	</div>
</div>
