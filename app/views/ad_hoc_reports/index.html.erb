<%= javascript_tag 'setPageTitle("Ad-Hoc Reports")' %>
<%= javascript_include_tag 'standard_datatable' %>
<% first_level_breadcrumb (:ad_hoc_reports) %>
<h3>Index: Ad-Hoc Reports</h3>
<div class="row">
	<div class="col-md-12 card wide">
		<div class="card-header">Ad-Hoc Reports</div>
		<div class="card-content table-cardstyle">
			<table id="main" class="table table-striped table-bordered table-condensed">
				<thead>
			  	<tr>
			    	<th>Label</th>
			    	<th>Last Run</th>
			    	<th>Active</th>
			    	<th class="fit ignore"></th>
			    	<th class="fit ignore"></th>
			    	<th class="fit ignore"></th>
			  	</tr>
				</thead>
				<tbody>
					<% @items.each do |item| %>
			    	<tr>
							<td><%= item.label %></td>
			    		<td><%= Timestamp.new(item.last_run).to_datetime %></td>
			    		<%= true_false_glyphicon(item.active) %>
			    		<td><%= link_to "Run", run_start_ad_hoc_report_path(item), :class => "btn green btn-xs" %></td>
			    		<td><%= link_to "Results", results_ad_hoc_report_path(item), :class => "btn btn-xs" %></td>
			    		<% if policy(AdHocReport).destroy? %>
			    			<td><%= link_to "Delete", ad_hoc_report_path(item), method: :delete, data: { confirm: "Are you sure?" }, :class => "btn red btn-xs" %></td>
			    		<% else %>
			    			<td></td>
			    		<% end %>
			    	</tr>
					<% end %>
			  </tbody>
			</table>
			<% if policy(AdHocReport).create? %>
				<%= link_to "+ Add New", new_ad_hoc_report_path, :class => "btn medium green" %>
			<% end %>
		</div>
	</div>
</div>
