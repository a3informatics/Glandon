<%= javascript_include_tag 'standard_datatable' %>
<% second_level_breadcrumb("CDISC Terminology", history_cdisc_terms_path, "Show") %>
<style>

</style>
<%= render partial: "shared/stdInstanceTitle", :locals => {:title => "Show:", :item => @cdiscTerm} %>
<div class="col-md-12">
	<h4>Details</h4>
	<table class="table table-striped table-bordered table-condensed">
	  <thead>
	  <tr>
	    <th>Identifer</th>
	    <th>Label</th>
	    <th>Owner</th>
	    <th>Status</th>
	    <th>Version</th>
	    <th>Version Label</th>
	    <th class="fit"></th>
	  </tr>
		</thead>
		<tbody>
	  <tr>
	    <td><%= @cdiscTerm.identifier %></td>
	    <td><%= @cdiscTerm.label %></td>
	    <td><%= @cdiscTerm.owner %></td>
	    <td><%= @cdiscTerm.registrationState.registrationStatus %></td>
	    <td><%= @cdiscTerm.semantic_version %></td>
	    <td><%= @cdiscTerm.versionLabel %></td>
	    <td class="fit">
	    	<%= link_to "Impact", impact_thesauri_index_path(id: @cdiscTerm.id, namespace: @cdiscTerm.namespace), :class => "btn btn-info btn-xs" %>
	    	<%= link_to cross_reference_cdisc_term_path(id: @cdiscTerm.id, cdisc_term: {namespace: @cdiscTerm.namespace, direction: :from}), :class => "btn btn-primary btn-xs" do %>
	    		<i class="fa fa-exclamation-triangle"></i> Change Instructions
	    	<% end %>
	    </td>
	  </tr>
	</tbody>
	</table>
	<h4>Code Lists</h4>
	<table id="main" class="table table-striped table-bordered table-condensed">
	  <thead>
		  <tr>
		    <th>Identifer</th>
		    <th>Submission Value</th>
		    <th>Preferred Term</th>
		    <th>Synonym(s)</th>
		    <th>Extensible</th>
		    <th>Definition</th>
		    <th></th>
		  </tr>
		</thead>
		<tbody>
			<% @cdiscTerm.children.each do |cl| %>
		  	<tr>
		    	<td><%= cl.identifier %></td>
			    <td><%= cl.notation %></td>
			    <td><%= cl.preferredTerm %></td>
			    <td><%= cl.synonym %></td>
			    <td><%= cl.extensible %></td>
			    <td><%= cl.definition %></td>
			    <td><%= link_to "Show", cdisc_cl_path(:id => cl.id, :namespace => cl.namespace), :class => "btn btn-primary btn-xs" %></td>
		  	</tr>
			<% end %>
		</tbody>
	</table>
	<h4>Changes</h4>
	<table id="secondary" class="table table-striped table-bordered table-condensed">
		<thead>  
		  	<tr>
			    <th>Label</th>
			    <th>Version</th>
			    <th>Version Label</th>
			    <th class="fit"></th>
			    <th class="fit"></th>
			</tr>
		<thead>
		<tbody>
			<% @cdiscTerms.each do |ct| %>
			  	<tr>
			    	<td><%= ct.label %></td>
						<td><%= ct.semantic_version %></td>
						<td><%= ct.versionLabel %></td>
						<td class="fit"><%= link_to "Show", cdisc_term_path(id: ct.id, namespace: ct.namespace), :class => "btn btn-primary btn-xs" %></td>
						<td class="fit"><%= link_to "Compare", compare_calc_cdisc_terms_path(:newId => @cdiscTerm.id, :newNamespace => @cdiscTerm.namespace, :oldId => ct.id, :oldNamespace => ct.namespace), :class => "btn btn-primary btn-xs" %></td>
			  	</tr>
			<% end %>
		</tbody>
	</table>
	<% if policy(CdiscTerm).import? %>
		<%= link_to "Import Change Instructions", import_cross_reference_cdisc_term_path(id: @cdiscTerm.id, cdisc_term: { namespace: @cdiscTerm.namespace }), :class => "btn btn-success" %>
	<% end %>
	<%= link_to "Close", history_cdisc_terms_path, :class => "btn btn-primary" %>
</div>

